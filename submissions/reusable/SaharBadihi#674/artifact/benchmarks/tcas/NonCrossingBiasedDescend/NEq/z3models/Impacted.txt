

----------------------------------------------------Model (the counterexample in z3 smt2 format): ---------------------------------
(model 
  (define-fun Own_Tracked_Alt () Int
    5)
  (define-fun need_downward_RA () Int
    8)
  (define-fun Own_Tracked_Alt_Rate () Int
    11)
  (define-fun Ret () Real
    1.0)
  (define-fun High_Confidence () Int
    10)
  (define-fun Climb_Inhibit () Int
    2)
  (define-fun need_upward_RA () Int
    7)
  (define-fun Down_Separation () Int
    0)
  (define-fun Other_RAC () Int
    9)
  (define-fun Other_Tracked_Alt () Int
    4)
  (define-fun Other_Capability () Int
    12)
  (define-fun Two_of_Three_Reports_Valid () Int
    6)
  (define-fun Up_Separation () Int
    13)
  (define-fun Alt_Layer_Value () Int
    3)
  (define-fun Cur_Vertical_Sep () Int
    38)
  (define-fun AF_Inhibit_Biased_Climb ((x!0 Int)
   (x!1 Int)
   (x!2 Int)
   (x!3 Int)
   (x!4 Int)
   (x!5 Int)
   (x!6 Int)
   (x!7 Int)
   (x!8 Int)
   (x!9 Int)
   (x!10 Int)
   (x!11 Int)
   (x!12 Int)
   (x!13 Int)) Int
    (- 1))
  (define-fun AF_Own_Above_Threat ((x!0 Int)
   (x!1 Int)
   (x!2 Int)
   (x!3 Int)
   (x!4 Int)
   (x!5 Int)
   (x!6 Int)
   (x!7 Int)
   (x!8 Int)
   (x!9 Int)
   (x!10 Int)
   (x!11 Int)
   (x!12 Int)
   (x!13 Int)) Int
    15)
)

-----------------------------------------------------------------------------------------------
-------------------The Z3 formula for the old method (z3 smt format) -------------------------
(let ((a!1 (AF_ALIM Climb_Inhibit
                    Alt_Layer_Value
                    Other_Tracked_Alt
                    Own_Tracked_Alt
                    Two_of_Three_Reports_Valid
                    need_upward_RA
                    need_downward_RA
                    Other_RAC
                    High_Confidence
                    Own_Tracked_Alt_Rate
                    Cur_Vertical_Sep
                    Other_Capability
                    Down_Separation
                    Up_Separation))
      (a!2 (= (AF_Own_Below_Threat
                Climb_Inhibit
                Alt_Layer_Value
                Other_Tracked_Alt
                Own_Tracked_Alt
                Two_of_Three_Reports_Valid
                need_upward_RA
                need_downward_RA
                Other_RAC
                High_Confidence
                Own_Tracked_Alt_Rate
                Cur_Vertical_Sep
                Other_Capability
                Down_Separation
                Up_Separation)
              1))
      (a!3 (AF_Inhibit_Biased_Climb
             Climb_Inhibit
             Alt_Layer_Value
             Other_Tracked_Alt
             Own_Tracked_Alt
             Two_of_Three_Reports_Valid
             need_upward_RA
             need_downward_RA
             Other_RAC
             High_Confidence
             Own_Tracked_Alt_Rate
             Cur_Vertical_Sep
             Other_Capability
             Down_Separation
             Up_Separation))
      (a!4 (= (AF_Own_Above_Threat
                Climb_Inhibit
                Alt_Layer_Value
                Other_Tracked_Alt
                Own_Tracked_Alt
                Two_of_Three_Reports_Valid
                need_upward_RA
                need_downward_RA
                Other_RAC
                High_Confidence
                Own_Tracked_Alt_Rate
                Cur_Vertical_Sep
                Other_Capability
                Down_Separation
                Up_Separation)
              1)))
  (or (and (>= Down_Separation a!1)
           (>= Cur_Vertical_Sep 300)
           a!2
           (> a!3 Down_Separation)
           (= Ret 1.0))
      (and (< Down_Separation a!1)
           (>= Cur_Vertical_Sep 300)
           a!2
           (> a!3 Down_Separation)
           (= Ret 0.0))
      (and (< Cur_Vertical_Sep 300) a!2 (> a!3 Down_Separation) (= Ret 0.0))
      (and (not a!2) (> a!3 Down_Separation) (= Ret 0.0))
      (and (and a!4 (<= a!3 Down_Separation)) (= Ret 1.0))
      (and (and a!4 (<= a!3 Down_Separation)) (= Ret 0.0))
      (and (and a!4 (<= a!3 Down_Separation)) (= Ret 0.0))
      (and (not a!4) (<= a!3 Down_Separation) (= Ret 1.0))))
-----------------------------------------------------------------------------------------------

-------------------The Z3 formula for the new method ------------------------------------------
(let ((a!1 (AF_ALIM Climb_Inhibit
                    Alt_Layer_Value
                    Other_Tracked_Alt
                    Own_Tracked_Alt
                    Two_of_Three_Reports_Valid
                    need_upward_RA
                    need_downward_RA
                    Other_RAC
                    High_Confidence
                    Own_Tracked_Alt_Rate
                    Cur_Vertical_Sep
                    Other_Capability
                    Down_Separation
                    Up_Separation))
      (a!2 (= (AF_Own_Below_Threat
                Climb_Inhibit
                Alt_Layer_Value
                Other_Tracked_Alt
                Own_Tracked_Alt
                Two_of_Three_Reports_Valid
                need_upward_RA
                need_downward_RA
                Other_RAC
                High_Confidence
                Own_Tracked_Alt_Rate
                Cur_Vertical_Sep
                Other_Capability
                Down_Separation
                Up_Separation)
              1))
      (a!3 (= (AF_Inhibit_Biased_Climb
                Climb_Inhibit
                Alt_Layer_Value
                Other_Tracked_Alt
                Own_Tracked_Alt
                Two_of_Three_Reports_Valid
                need_upward_RA
                need_downward_RA
                Other_RAC
                High_Confidence
                Own_Tracked_Alt_Rate
                Cur_Vertical_Sep
                Other_Capability
                Down_Separation
                Up_Separation)
              Down_Separation))
      (a!4 (= (AF_Own_Above_Threat
                Climb_Inhibit
                Alt_Layer_Value
                Other_Tracked_Alt
                Own_Tracked_Alt
                Two_of_Three_Reports_Valid
                need_upward_RA
                need_downward_RA
                Other_RAC
                High_Confidence
                Own_Tracked_Alt_Rate
                Cur_Vertical_Sep
                Other_Capability
                Down_Separation
                Up_Separation)
              1)))
  (or (and (>= Down_Separation a!1)
           (>= Cur_Vertical_Sep 300)
           a!2
           a!3
           (= Ret 1.0))
      (and (< Down_Separation a!1)
           (>= Cur_Vertical_Sep 300)
           a!2
           a!3
           (= Ret 0.0))
      (and (< Cur_Vertical_Sep 300) a!2 a!3 (= Ret 0.0))
      (and (not a!2) a!3 (= Ret 0.0))
      (and (and a!4 (not a!3)) (= Ret 0.0))
      (and (and a!4 (not a!3)) (= Ret 1.0))
      (and (and a!4 (not a!3)) (= Ret 1.0))
      (and (not a!4) (not a!3) (= Ret 0.0))))
-----------------------------------------------------------------------------------------------

-------------------The final Z3 formula for constraint solving -------------------------
(declare-fun Down_Separation () Int)
(declare-fun Climb_Inhibit () Int)
(declare-fun Alt_Layer_Value () Int)
(declare-fun Other_Tracked_Alt () Int)
(declare-fun Own_Tracked_Alt () Int)
(declare-fun Two_of_Three_Reports_Valid () Int)
(declare-fun need_upward_RA () Int)
(declare-fun need_downward_RA () Int)
(declare-fun Other_RAC () Int)
(declare-fun High_Confidence () Int)
(declare-fun Own_Tracked_Alt_Rate () Int)
(declare-fun Cur_Vertical_Sep () Int)
(declare-fun Other_Capability () Int)
(declare-fun Up_Separation () Int)
(declare-fun AF_ALIM (Int Int Int Int Int Int Int Int Int Int Int Int Int Int ) Int)
(declare-fun AF_Own_Below_Threat (Int Int Int Int Int Int Int Int Int Int Int Int Int Int ) Int)
(declare-fun AF_Inhibit_Biased_Climb (Int Int Int Int Int Int Int Int Int Int Int Int Int Int ) Int)
(declare-fun Ret () Real)
(declare-fun AF_Own_Above_Threat (Int Int Int Int Int Int Int Int Int Int Int Int Int Int ) Int)
(let ((a!1 (AF_ALIM Climb_Inhibit
                    Alt_Layer_Value
                    Other_Tracked_Alt
                    Own_Tracked_Alt
                    Two_of_Three_Reports_Valid
                    need_upward_RA
                    need_downward_RA
                    Other_RAC
                    High_Confidence
                    Own_Tracked_Alt_Rate
                    Cur_Vertical_Sep
                    Other_Capability
                    Down_Separation
                    Up_Separation))
      (a!2 (= (AF_Own_Below_Threat
                Climb_Inhibit
                Alt_Layer_Value
                Other_Tracked_Alt
                Own_Tracked_Alt
                Two_of_Three_Reports_Valid
                need_upward_RA
                need_downward_RA
                Other_RAC
                High_Confidence
                Own_Tracked_Alt_Rate
                Cur_Vertical_Sep
                Other_Capability
                Down_Separation
                Up_Separation)
              1))
      (a!3 (AF_Inhibit_Biased_Climb
             Climb_Inhibit
             Alt_Layer_Value
             Other_Tracked_Alt
             Own_Tracked_Alt
             Two_of_Three_Reports_Valid
             need_upward_RA
             need_downward_RA
             Other_RAC
             High_Confidence
             Own_Tracked_Alt_Rate
             Cur_Vertical_Sep
             Other_Capability
             Down_Separation
             Up_Separation))
      (a!4 (= (AF_Own_Above_Threat
                Climb_Inhibit
                Alt_Layer_Value
                Other_Tracked_Alt
                Own_Tracked_Alt
                Two_of_Three_Reports_Valid
                need_upward_RA
                need_downward_RA
                Other_RAC
                High_Confidence
                Own_Tracked_Alt_Rate
                Cur_Vertical_Sep
                Other_Capability
                Down_Separation
                Up_Separation)
              1)))
(let ((a!5 (or (and (and (>= Down_Separation a!1) (>= Cur_Vertical_Sep 300) a!2)
                    (> a!3 Down_Separation)
                    (= Ret 1.0))
               (and (and (< Down_Separation a!1) (>= Cur_Vertical_Sep 300) a!2)
                    (> a!3 Down_Separation)
                    (= Ret 0.0))
               (and (and (< Cur_Vertical_Sep 300) a!2)
                    (> a!3 Down_Separation)
                    (= Ret 0.0))
               (and (not a!2) (> a!3 Down_Separation) (= Ret 0.0))
               (and (and a!4 (<= a!3 Down_Separation)) (= Ret 1.0))
               (and (and a!4 (<= a!3 Down_Separation)) (= Ret 0.0))
               (and (and a!4 (<= a!3 Down_Separation)) (= Ret 0.0))
               (and (not a!4) (<= a!3 Down_Separation) (= Ret 1.0))))
      (a!6 (and (and a!4 (not (= a!3 Down_Separation))) (= Ret 0.0)))
      (a!7 (and (and a!4 (not (= a!3 Down_Separation))) (= Ret 1.0))))
(let ((a!8 (or (and (and (>= Down_Separation a!1) (>= Cur_Vertical_Sep 300) a!2)
                    (= a!3 Down_Separation)
                    (= Ret 1.0))
               (and (and (< Down_Separation a!1) (>= Cur_Vertical_Sep 300) a!2)
                    (= a!3 Down_Separation)
                    (= Ret 0.0))
               (and (and (< Cur_Vertical_Sep 300) a!2)
                    (= a!3 Down_Separation)
                    (= Ret 0.0))
               (and (not a!2) (= a!3 Down_Separation) (= Ret 0.0))
               a!6
               a!7
               a!7
               (and (not a!4) (not (= a!3 Down_Separation)) (= Ret 0.0)))))
  (not (= a!5 a!8)))))
-----------------------------------------------------------------------------------------------
